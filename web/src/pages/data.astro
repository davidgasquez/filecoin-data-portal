---
import Layout from "../layouts/Layout.astro"
import Card from "../components/Card.astro"

const quakPreview = (fileName: string) =>
  `https://manzt.github.io/quak/?source=https://data.filecoindataportal.xyz/${fileName}`

const metricsDatasets = [
  {
    title: "Daily",
    description: "Collection of Filecoin related metrics at daily resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_daily_metrics.parquet",
      },
      {
        text: "Sheet",
        link: "https://docs.google.com/spreadsheets/d/1uq9J_WTJO6kAvQlrqkqR8GHfQfh3SJ84OSj88Mff6vY/edit?usp=sharing",
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Weekly",
    description: "Collection of Filecoin related metrics at weekly resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_weekly_metrics.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_weekly_metrics.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Monthly",
    description: "Collection of Filecoin related metrics at monthly resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_monthly_metrics.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_monthly_metrics.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Storage Providers Daily",
    description: "Storage Provider specific metrics at daily resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_daily_storage_providers_metrics.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_daily_storage_providers_metrics.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Clients Daily",
    description: "Client specific metrics at daily resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_daily_clients_metrics.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_daily_clients_metrics.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Transactions Daily",
    description: "Transaction specific metrics at daily resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_daily_transactions.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_daily_transactions.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Onramps Daily",
    description: "Onramp specific metrics at daily resolution.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_daily_onramps_metrics.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_daily_onramps_metrics.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Upcoming Sector Expirations Daily",
    description: "Daily view of upcoming sector expirations across the network.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_daily_upcoming_sector_expirations.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_daily_upcoming_sector_expirations.parquet"),
        target: "_blank" as const,
      },
    ],
  },
]

const entityDatasets = [
  {
    title: "Storage Providers",
    description: "Information and metrics about all Storage Providers.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_storage_providers.parquet",
      },
      {
        text: "Sheet",
        link: "https://docs.google.com/spreadsheets/d/1hC5HwuiqQvQcVvV06n3SH0wKkZwbw20EufGYHSyENs0/edit?usp=sharing",
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Clients",
    description: "Information and metrics about all Clients.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_clients.parquet",
      },
      {
        text: "Sheet",
        link: "https://docs.google.com/spreadsheets/d/15xi39OheVJ-_WyI7sxwmvgMIVFkZN07NOYWLe5iKXnI/edit?usp=sharing",
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Allocators",
    description: "Information and metrics about all Allocators.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_allocators.parquet",
      },
      {
        text: "Sheet",
        link: "https://docs.google.com/spreadsheets/d/1uixeylC3pTeOkKh0L2fGsd7YKuyaA6Hse_fhWrm1BIA/edit?usp=sharing",
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Onramps",
    description: "Information and metrics about known onramp entities.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_onramps.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_onramps.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Deals",
    description: "Information and metrics about all deals.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_state_market_deals.parquet",
      },
      {
        text: "Preview",
        link: "https://sql-workbench.com/#queries=v0,select-*-from-'https%3A%2F%2Fdata.filecoindataportal.xyz%2Ffilecoin_state_market_deals.parquet'-limit-1000~",
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Datacap Allocations",
    description: "Details about all Datacap allocations.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_datacap_allocations.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_datacap_allocations.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Allocators Datacap Allowances",
    description: "Details about Datacap allowances for allocators.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_allocators_datacap_allowances.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_allocators_datacap_allowances.parquet"),
        target: "_blank" as const,
      },
    ],
  },
  {
    title: "Clients Datacap Allowances",
    description: "Details about Datacap allowances for clients.",
    buttons: [
      {
        text: "Download",
        link: "https://data.filecoindataportal.xyz/filecoin_clients_datacap_allowances.parquet",
      },
      {
        text: "Preview",
        link: quakPreview("filecoin_clients_datacap_allowances.parquet"),
        target: "_blank" as const,
      },
    ],
  },
]
---

<Layout
  title="Data | Filecoin Data Portal"
  description="Browse and download open Filecoin datasets in Parquet and companion formats."
>
  <section class="page-header" aria-labelledby="data-title">
    <h1 id="data-title">Data</h1>
    <p>
      Open datasets for Filecoin metrics and entities. Updated daily and
      available in multiple formats.
    </p>
  </section>

  <section class="content-flow" aria-labelledby="metrics">
    <h2 id="metrics" class="section-title">Metrics</h2>
    <p>
      Datasets with metrics to analyze the Filecoin ecosystem at different time
      scales.
    </p>

    <div class="card-grid">
      {
        metricsDatasets.map((dataset) => (
          <Card
            title={dataset.title}
            description={dataset.description}
            headingLevel="h3"
            buttons={dataset.buttons}
          />
        ))
      }
    </div>
  </section>

  <section class="content-flow" aria-labelledby="entities">
    <h2 id="entities" class="section-title">Entities</h2>
    <p>
      Datasets with entity level metrics where each row represents a unique
      deal, client, provider, or related participant.
    </p>

    <div class="card-grid">
      {
        entityDatasets.map((dataset) => (
          <Card
            title={dataset.title}
            description={dataset.description}
            headingLevel="h3"
            buttons={dataset.buttons}
          />
        ))
      }
    </div>
  </section>
</Layout>
