---
interface Button {
  text: string
  link: string
  target?: "_blank" | "_self"
}

interface Props {
  title: string
  description: string
  buttons?: Button[]
  headingLevel?: "h2" | "h3"
}

const {
  title,
  description,
  buttons = [],
  headingLevel = "h2",
} = Astro.props

const HeadingTag = headingLevel
---

<article class="card">
  <div class="card-body">
    <HeadingTag class="card-title">{title}</HeadingTag>
    <p>{description}</p>
  </div>

  {
    buttons.length > 0 && (
      <div class="card-actions" aria-label={`${title} links`}>
        {buttons.map((button) => {
          const isExternal = button.target === "_blank"

          return (
            <a
              href={button.link}
              class="card-action"
              target={button.target}
              rel={isExternal ? "noopener noreferrer" : undefined}
            >
              {button.text}
            </a>
          )
        })}
      </div>
    )
  }
</article>

<style>
  .card {
    display: grid;
    gap: var(--space-4);
    border: 1px solid var(--color-border);
    background: var(--color-bg-muted);
    padding: var(--space-4);
    block-size: 100%;
  }

  .card-body {
    display: grid;
    gap: var(--space-3);
  }

  .card-title {
    margin: 0;
    font-size: 1.2rem;
    text-transform: none;
    letter-spacing: normal;
  }

  .card-body p {
    margin: 0;
    color: var(--color-text-muted);
  }

  .card-actions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .card-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.45rem 0.75rem;
    border: 1px solid var(--color-text);
    background: var(--color-text);
    color: var(--color-bg);
    text-decoration: none;
    font-size: 0.9rem;
  }

  .card-action:hover {
    background: var(--color-bg);
    color: var(--color-text);
  }
</style>
