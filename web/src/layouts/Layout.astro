---
import "../styles.css"
import Head from "../components/Head.astro"

interface Props {
  title?: string
  description?: string
  image?: string
  canonicalUrl?: string
}

const {
  title = "Filecoin Data Portal",
  description = "Open Data Platform for the Filecoin ecosystem.",
  image = "/banner.png",
  canonicalUrl = Astro.url.pathname,
} = Astro.props

const pathname = Astro.url.pathname

const navItems = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/data", label: "Data" },
  { href: "/dashboards", label: "Dashboards" },
  { href: "/docs", label: "Documentation" },
]

const normalizePath = (value: string) =>
  value === "/" ? value : value.replace(/\/$/, "")

const currentPath = normalizePath(pathname)
---

<!doctype html>
<html lang="en">
  <head>
    <Head
      title={title}
      description={description}
      image={image}
      canonicalUrl={canonicalUrl}
    />
  </head>

  <body>
    <a class="skip-link" href="#main-content">Skip to main content</a>

    <header class="site-header">
      <a class="site-logo-link" href="/" aria-label="Filecoin Data Portal home">
        <img
          src="/favicon.svg"
          alt="Filecoin Data Portal logo"
          width="96"
          height="96"
          loading="eager"
          decoding="async"
        />
      </a>

      <nav class="site-nav" aria-label="Primary">
        <ul>
          {
            navItems.map(({ href, label }) => {
              const isCurrent = currentPath === normalizePath(href)

              return (
                <li>
                  <a href={href} aria-current={isCurrent ? "page" : undefined}>
                    {label}
                  </a>
                </li>
              )
            })
          }
        </ul>
      </nav>
    </header>

    <main id="main-content" class="site-main">
      <slot />
    </main>

    <footer class="site-footer">
      <p>
        <a href="https://davidgasquez.com/">Reach out</a> or explore the
        <a href="https://github.com/davidgasquez/filecoin-data-portal">project code</a>.
      </p>
    </footer>
  </body>
</html>
